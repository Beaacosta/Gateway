
<!DOCTYPE html>
<html>

<head>
<meta charset="UTF-8"></meta>
<title>WallapopTiw</title>
<meta name="viewport"
	content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"></meta>
<!-- Latest compiled and minified CSS -->
   
	<script th:href="@{/js/jquery.js}" src="/js/jquery.js"></script>
	<script th:href="@{/js/bootstrap.js}" src="/js/jbootstrap.js"></script>
	<script th:href="@{/js/bootstrap.min.js}" src="/js/bootstrap.min.js"></script>
	<script th:href="@{/js/npm.js}" src="/js/npm.js"></script>
	
	<link rel="stylesheet" href="/css/estilos.css" />
	
	<link rel="stylesheet" href="/css/bootstrap-theme.css" />
	<link rel="stylesheet" href="/css/bootstrap-theme.css.map" />
	<link rel="stylesheet" href="/css/bootstrap-theme.min.css" />
	<link rel="stylesheet" href="/css/bootstrap-theme.min.css.map" />
	<link rel="stylesheet" href="/css/bootstrap.css" />	
	<link rel="stylesheet" href="/css/bootstrap.css.map" />	
	<link rel="stylesheet" href="/css/bootstrap.min.css" />	
	<link rel="stylesheet" href="/css/bootstrap.min.css.map" />	
	<link rel="stylesheet" href="/css/bootstrap-theme.css" />		


</head>
<body>

    <div class="alert alert-info" th:if="${error !=''}" >
  		<h4 th:text="${error}"></h4>
	</div>

	<header class="container-fluid">
		<div class="col-xs-3 col-sm-3">
			<form action="pag_principal" method="post">
				<a th:href="@{/wallapoptiw/PPrincipal2}"><img src="/images/logo.png" width="100"></img></a>
			</form>
		</div>
		<div class="col-xs-9 col-sm-5">
			<h1>
				<b>WALLAPOPTIW</b>
			</h1>
		</div>
		<nav class="col-xs-12 col-sm-4">
				<ul id="menu" class="nav navbar-nav navbar-right">
					<li><a th:href="@{/wallapoptiw/MiPerfilEditar}">
							<img src="/images/usuario.png" width="30"></img>
						</a></li>
					<li><a th:href="@{/wallapoptiw/MisProductos2}">
							<img src="/images/productos.png" width="30" height="30"></img>
						</a></li>
					<li><a th:href="@{/wallapoptiw/Chat}">
							<img src="/images/chats.png" width="30"></img>
						</a></li>
					<li><a th:href="@{/wallapoptiw/CerrarSesion}">
							<img src="/images/cerrar.png" width="30"></img>
						</a></li>
				</ul>
		</nav>
		<div style="text-align:center;">
			<input type="text" id="cuadrobusquedafotos" class="form-control" placeholder="Buscar..."/>
		</div>
		<br></br>
	</header>


	<!-- EMPEZAMOS A LISTAR PRODUCTOS -->

	<div class="row" id="listaproductos">


		<div class="col-xs-9">
		<!--  
			<%
				EntityManager em = (EntityManager) sesion.getAttribute("em");
				UserTransaction ut = (UserTransaction) sesion.getAttribute("ut");
				ProductoDAOImpl prod = new ProductoDAOImpl(em, ut);
				UsuarioDAOImpl usuarioDao = new UsuarioDAOImpl(em, ut);

				//Collection<Usuario> coleccionUsuario = usuarioDao.listarUsuarios();

				Collection<Producto> coleccionProducto = prod.listarProductos();
				if (coleccionProducto.isEmpty()) {
			%>
			-->

			<div class="col-xs-12 col-md-4 cajaproducto" th:if="${lista_productos.isEmpty()}" >
				<p>No existen productos a la venta</p>
			</div>
			<!--  
			<%
				} else {
					for (Producto p : coleccionProducto) {

						sesion.setAttribute("prod_sesion", p);
			%>
			-->
				<div class="col-xs-12 col-md-4 cajaproducto" th:if="${!lista_productos.isEmpty()}" th:each="prod: ${lista_productos}">
					<div class="container cont-fotos">
						<div class="row">
									<div class="col-xs-3 col-md-1">
										<img src="/images/carrito.png" width="100" alt="imagenprod1">
										</img>
									</div>
									<div class="col-xs-9 col-md-3 datos">
										<h3 th:text="${prod.titulo}" ></h3>
									</div>
						</div>
						<div class="row col-xs-12 col-md-4 precio">
							<h4 th:text="${prod.precio}"></h4>
							<form th:action="@{/wallapoptiw/Producto}"  method="get">
								<button type="hidden" class="btn btn-default" name="idProducto" th:value="${prod.idProducto}">Más información</button>
							</form>
										</div>
									</div>
								</div>		
					
				
	<!--  
	<%
		}
		}
	%>
	-->
	<script>
		$(function(){
			$("#cuadrobusquedafotos").keyup(actualizar_busqueda);
		});
		
		function actualizar_busqueda(){
			var filtro = $("#cuadrobusquedafotos").val().toLowerCase();
			$(".cont-fotos").show();
			
			if(filtro!=''){
				$(".cont-fotos").each(function(){
					if($(this).html().toLowerCase().indexOf(filtro) == -1){
						$(this).hide();
					}
				})
			}
				
		}
	</script>
	</div>

	</div>

	<footer class="container-fluid">
		<div class="row">
			<p>Wallapop, compra y vende productos</p>
			<p>CONDICIONES DE USO. POLITICA DE PRIVACIDAD Y COOKIES</p>
			<p>Copyright © 2016 - Wallapop - de sus respectivos propietarios</p>


			
		</div>
	</footer>

</body>
</html>
